{"ast":null,"code":"import _slicedToArray from\"C:/Users/jespe/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import RatingSelect from\"./RatingSelect\";import Card from\"./shared/Card\";import Button from\"./shared/Button\";import FeedbackContext from\"../context/FeedbackContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState('10'),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState('true'),_useState6=_slicedToArray(_useState5,2),btnDisabled=_useState6[0],setBtnDisabled=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){if(text===''){setBtnDisabled(true);setMessage(null);}else if(text!==''&&text.trim().length<=10){setMessage('Text must be at least 10 characters');setBtnDisabled(true);}else{setMessage(null);setBtnDisabled(false);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}setText('');}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your experience with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["useState","useContext","useEffect","RatingSelect","Card","Button","FeedbackContext","jsx","_jsx","jsxs","_jsxs","FeedbackForm","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","rating","setRating","_useState5","_useState6","btnDisabled","setBtnDisabled","_useState7","_useState8","message","setMessage","_useContext","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback","id","children","onSubmit","select","className","onChange","type","placeholder","isDisabled"],"sources":["C:/Users/jespe/feedback-app/src/components/FeedbackForm.jsx"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\"\r\nimport RatingSelect from \"./RatingSelect\"\r\nimport Card from \"./shared/Card\"\r\nimport Button from \"./shared/Button\"\r\nimport FeedbackContext from \"../context/FeedbackContext\"\r\n\r\nfunction FeedbackForm() {\r\n    const [text, setText] = useState('')\r\n    const [rating, setRating] = useState('10')\r\n    const [btnDisabled, setBtnDisabled] = useState('true')\r\n    const [message, setMessage] = useState('')\r\n\r\n    const { addFeedback, feedbackEdit, updateFeedback } = useContext(FeedbackContext)\r\n\r\n    useEffect(() => {\r\n        if(feedbackEdit.edit === true) {\r\n            setBtnDisabled(false)\r\n            setText(feedbackEdit.item.text)\r\n            setRating(feedbackEdit.item.rating)\r\n        }\r\n    }, [feedbackEdit])\r\n\r\n    const handleTextChange = (e) => {\r\n        if(text === '') {\r\n            setBtnDisabled(true)\r\n            setMessage(null)\r\n        } else if(text !== '' && text.trim().length <= 10) {\r\n            setMessage('Text must be at least 10 characters')\r\n            setBtnDisabled(true)\r\n        } else {\r\n            setMessage(null)\r\n            setBtnDisabled(false)\r\n        }\r\n\r\n\r\n        setText(e.target.value);\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        if (text.trim().length > 10) {\r\n            const newFeedback = {\r\n                text,\r\n                rating,\r\n            }\r\n\r\n            if(feedbackEdit.edit === true) {\r\n                updateFeedback(feedbackEdit.item.id, newFeedback)\r\n            } else {\r\n                addFeedback(newFeedback) \r\n            }\r\n            setText('')\r\n        }\r\n    }\r\n\r\n  return (\r\n    <Card>\r\n        <form onSubmit={handleSubmit}>\r\n            <h2>How would you rate your experience with us?</h2>\r\n            <RatingSelect select={(rating) => setRating(rating)} />\r\n            <div className=\"input-group\">\r\n                <input\r\n                 onChange={handleTextChange} \r\n                 type=\"text\" \r\n                 placeholder=\"Write a review\"\r\n                 value={text} \r\n                 />\r\n                <Button type=\"submit\" isDisabled= {btnDisabled} >Send</Button>\r\n            </div>\r\n            {message && <div className=\"message\">{message}</div>}\r\n        </form>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default FeedbackForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}